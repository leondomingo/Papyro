<?xml version="1.0" encoding="ISO-8859-1" ?>
<report>
    <name>Mi primer informe chispas</name>
    <configuration>
        <paper>
            <size>A4</size>
            <margin>
                <left>1.50</left>
                <right>1.50</right>
                <top>1.50</top>
                <bottom>1.50</bottom>
            </margin>
            <orientation>portrait</orientation>
        </paper>
    </configuration>
    <font>
        <name>Times-Roman</name>
        <size>10</size>
        <color></color>
        <style>
        </style>
    </font>
    <params>
        <param name="FECHA">01/10/2009</param>
        <param name="NUMERO_ALUMNOS">5</param>
    </params>
    <report_title>
        <id>title_1</id>
        <body></body>
    </report_title>
    <page>
        <id>page_1</id>
        <number>1</number>
        <page_header>
            <id>page_header_1</id>
            <options>
                <print_on_first_page/>
            </options>
            <body>
            </body>
        </page_header>
        <page_footer>
            <id>page_footer_1</id>
            <body></body>
        </page_footer>
        <body>
            <master>
                <id>master_1</id>
                <table>
                    <fields>
                        <field>ALUMNOS_ID</field>
                        <field>ALUMNOS_NOMBRE</field>
                        <field>ALUMNOS_APELLIDO1</field>
                        <field>ALUMNOS_APELLIDO2</field>
                    </fields>
                    <query>
                      SELECT 
                        alumnos.id as "ALUMNOS_ID",
                        alumnos.nombre as "ALUMNOS_NOMBRE",
                        coalesce(alumnos.apellido1, '') as "ALUMNOS_APELLIDO1",
                        coalesce(alumnos.apellido2, '') as "ALUMNOS_APELLIDO2"                         
                      FROM alumnos
                      ORDER BY alumnos.apellido1, alumnos.apellido2
                      LIMIT 100 /*%(NUMERO_ALUMNOS)s*/
                    </query>
                </table>
                <body>
                    <!--<label>
                        <id>lbl_id</id>
                        <caption>ID=#ALUMNOS_ID#</caption>
                    </label>-->
                    <text>
                        <id>texto3</id>
                        <value>AQUÍ UN "TEXT"</value>
                        <position>
                            <left>0</left>
                            <top>0</top>
                        </position>
                        <font>
                            <name>Courier</name>
                            <size>12</size>
                            <color></color>
                            <style></style>
                        </font>                            
                    </text>                    
                    <text>
                        <id>texto_alumno</id>
                        <value>(#ALUMNOS_ID#) #ALUMNOS_APELLIDO1# #ALUMNOS_APELLIDO2#, #ALUMNOS_NOMBRE# </value>
                        <position>
                            <left>20</left>
                            <top>0</top>
                        </position>
                    </text>
                </body>
                <detail>
                    <id>detail_1</id>
                    <master_field>ALUMNOS_ID</master_field>
                    <table>
                        <query>
                            SELECT
                                format_fecha('dd/mm/yyyy', matriculas.fechainicio) as "MATRICULAS_FECHAINICIO",
                                cursos.nombre as "CURSOS_NOMBRE"                                
                            FROM matriculas
                            JOIN cursos on cursos.id = matriculas.id_cursos_cursomatriculado
                            WHERE 
                              matriculas.id_alumnos_alumno = %(ALUMNOS_ID)d
                              /*and matriculas.fechainicio $$ '%(FECHA)s'*/
                            ORDER BY matriculas.fechainicio
                        </query>
                        <fields>
                            <field>MATRICULAS_FECHAINICIO</field>
                            <field>CURSOS_NOMBRE</field>
                        </fields>
                    </table>
                    <body>
                        <text>
                            <id>texto2</id>
                            <value>AQUÍ UN "TEXT"</value>
                            <font>
                                <name>Courier</name>
                                <size>12</size>
                                <color></color>
                                <style></style>
                            </font>                            
                        </text>
                        <text>
                            <id>texto_fecha</id>
                            <value>  Matrícula: #CURSOS_NOMBRE# #MATRICULAS_FECHAINICIO#</value>
                            <position>
                                <left>5</left>
                                <top>0</top>
                            </position>
                        </text>
                    </body>
                </detail>
            </master>
            <label>
                <id>lbl_vacia_1</id>
                <caption>(Una etiqueta aquí)</caption>
            </label>
            <label>
                <id>etiqueta_1</id>
                <caption>Soy una etiqueta (parámetro=#FECHA#)</caption>
                <position>
                    <left>0</left>
                    <top>0</top>
                </position>
                <size>
                    <height>0</height>
                    <width>0</width>
                </size>
            </label>
            <text>
                <id>texto_1</id>
                <value>Soy un campo de texto (parámetro=#FECHA#)</value>
                <position>
                    <left></left>
                    <top></top>
                </position>
            </text>
        </body>
    </page>
    <page>
        <id>otra_pagina</id>
        <number>2</number>
        <body>
            <label>
                <id>label_2</id>
                <caption>Parámetros:</caption>
            </label>        
            <label>
                <id>label_2</id>
                <caption>  FECHA = #FECHA#</caption>
            </label>
            <label>
                <id>label_2</id>
                <caption>  NUMERO_ALUMNOS = #NUMERO_ALUMNOS#</caption>
            </label>            
        </body>
    </page>    
</report>